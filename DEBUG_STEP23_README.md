# æ­¥éª¤23è°ƒè¯•æŒ‡å—

## æ¦‚è¿°

v1.8.3 ç‰ˆæœ¬æ–°å¢äº†HTMLè°ƒè¯•åŠŸèƒ½ï¼Œå¯ä»¥å¸®åŠ©ä½ åˆ†æå’Œè§£å†³æ­¥éª¤23çš„SRTå†…å®¹æå–é—®é¢˜ã€‚

## åŠŸèƒ½ç‰¹æ€§

### 1. è‡ªåŠ¨ä¿å­˜HTML
- æ¯æ¬¡è¿è¡Œæ­¥éª¤23æ—¶ï¼Œè‡ªåŠ¨ä¿å­˜å“åº”çš„HTMLå’Œæ–‡æœ¬å†…å®¹
- ä¿å­˜ä½ç½®ï¼š`assets/Process_Folder/{video_name}/debug/`
- æ–‡ä»¶å‘½åï¼š`step_23_response_{timestamp}.html` å’Œ `step_23_text_{timestamp}.txt`

### 2. HTMLåˆ†æå·¥å…·
- è‡ªåŠ¨æŸ¥æ‰¾ä»£ç å—ã€ä¸‹è½½æŒ‰é’®ã€SRTæ—¶é—´æˆ³
- æå–å¹¶ä¿å­˜SRTå†…å®¹
- ç»Ÿè®¡æŒ‰é’®ç±»å‹å’Œæ•°é‡

### 3. æ™ºèƒ½æå–ç­–ç•¥
- ç­–ç•¥1ï¼šä»ä»£ç å—æå–
- ç­–ç•¥2ï¼šä»ä¸‹è½½æŒ‰é’®é™„è¿‘æå–
- ç­–ç•¥3ï¼šä»å“åº”æ–‡æœ¬ä¸­æœç´¢

## ä½¿ç”¨æ­¥éª¤

### æ­¥éª¤1ï¼šè¿è¡Œè‡ªåŠ¨åŒ–è„šæœ¬

```bash
python video_automation.py
```

è§‚å¯Ÿæ—¥å¿—è¾“å‡ºï¼š
```
ğŸ“„ æ­¥éª¤23ï¼šå°è¯•é€šè¿‡ä¸‹è½½æŒ‰é’®è·å–SRTæ–‡ä»¶å†…å®¹...
ğŸ’¾ ä¿å­˜æ­¥éª¤23çš„HTMLå†…å®¹ç”¨äºè°ƒè¯•...
ğŸ’¾ å·²ä¿å­˜HTMLè°ƒè¯•æ–‡ä»¶: step_23_response_20241209_110949.html
ğŸ’¾ å·²ä¿å­˜æ–‡æœ¬è°ƒè¯•æ–‡ä»¶: step_23_text_20241209_110949.txt
```

### æ­¥éª¤2ï¼šæ£€æŸ¥è°ƒè¯•æ–‡ä»¶

```bash
# æŸ¥çœ‹ä¿å­˜çš„æ–‡ä»¶
ls -la assets/Process_Folder/*/debug/

# åº”è¯¥çœ‹åˆ°ï¼š
# step_23_response_20241209_110949.html
# step_23_text_20241209_110949.txt
```

### æ­¥éª¤3ï¼šåˆ†æHTMLç»“æ„

```bash
# å®‰è£…ä¾èµ–ï¼ˆé¦–æ¬¡ä½¿ç”¨ï¼‰
pip install beautifulsoup4

# è¿è¡Œåˆ†æå·¥å…·
python analyze_step23_html.py
```

åˆ†æå·¥å…·ä¼šè¾“å‡ºï¼š
- æ‰¾åˆ°çš„ä»£ç å—æ•°é‡
- æ‰¾åˆ°çš„ä¸‹è½½æŒ‰é’®æ•°é‡
- æ‰¾åˆ°çš„SRTæ—¶é—´æˆ³æ•°é‡
- æå–çš„SRTå†…å®¹é¢„è§ˆ
- æ‰€æœ‰æŒ‰é’®çš„ç»Ÿè®¡ä¿¡æ¯

### æ­¥éª¤4ï¼šæ‰‹åŠ¨æ£€æŸ¥HTML

```bash
# åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€HTMLæ–‡ä»¶
open assets/Process_Folder/Episode3/debug/step_23_response_*.html

# Windows:
# start assets/Process_Folder/Episode3/debug/step_23_response_*.html

# Linux:
# xdg-open assets/Process_Folder/Episode3/debug/step_23_response_*.html
```

åœ¨æµè§ˆå™¨ä¸­ï¼š
1. ä½¿ç”¨å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰
2. æœç´¢ `-->` æŸ¥æ‰¾SRTæ—¶é—´æˆ³
3. æŸ¥çœ‹ä»£ç å—ï¼ˆ`<pre>`, `<code>`ï¼‰
4. æŸ¥æ‰¾ä¸‹è½½æŒ‰é’®ï¼ˆ`button[aria-label*="download"]`ï¼‰

### æ­¥éª¤5ï¼šä¼˜åŒ–æå–ç­–ç•¥

æ ¹æ®HTMLç»“æ„ï¼Œä½ å¯ä»¥ï¼š

1. **è°ƒæ•´é€‰æ‹©å™¨**ï¼šä¿®æ”¹ `extract_srt_from_download_button()` ä¸­çš„é€‰æ‹©å™¨
2. **æ·»åŠ æ–°ç­–ç•¥**ï¼šåœ¨æ–¹æ³•ä¸­æ·»åŠ æ–°çš„æå–é€»è¾‘
3. **å¤„ç†æµ®çª—**ï¼šå¦‚æœæŒ‰é’®åœ¨æµ®çª—ä¸­ï¼Œæ·»åŠ ç‚¹å‡»å±•å¼€çš„é€»è¾‘

## é…ç½®é€‰é¡¹

### å¯ç”¨/ç¦ç”¨HTMLä¿å­˜

ç¼–è¾‘ `config.py`ï¼š

```python
# æ˜¯å¦ä¿å­˜è°ƒè¯•HTMLï¼ˆæ­¥éª¤23ç­‰ï¼‰
SAVE_DEBUG_HTML = True  # æ”¹ä¸º False å¯ç¦ç”¨
```

## åˆ†æå·¥å…·è¾“å‡ºç¤ºä¾‹

```
============================================================
ğŸ” æ­¥éª¤23 HTMLåˆ†æå·¥å…·
============================================================

ğŸ“‹ æ‰¾åˆ° 1 ä¸ªHTMLæ–‡ä»¶

ğŸ“„ åˆ†ææœ€æ–°çš„æ–‡ä»¶: Episode3/debug/step_23_response_20241209_110949.html

============================================================
ğŸ“„ åˆ†ææ–‡ä»¶: step_23_response_20241209_110949.html
============================================================

ğŸ” æŸ¥æ‰¾ä»£ç å—...
æ‰¾åˆ° 2 ä¸ªä»£ç å—

âœ… ä»£ç å— 0 åŒ…å«SRTå†…å®¹:
  é•¿åº¦: 1500 å­—ç¬¦
  é¢„è§ˆ: 1
00:00:00,000 --> 00:00:05,000
The glamorous facade...

ğŸ” æŸ¥æ‰¾ä¸‹è½½æŒ‰é’®...
æ‰¾åˆ° 2 ä¸ªä¸‹è½½æŒ‰é’®

æŒ‰é’® 0:
  aria-label: Download SRT file 1
  class: ['download-button']
  âœ… çˆ¶å…ƒç´ åŒ…å«SRTå†…å®¹
  é•¿åº¦: 1500 å­—ç¬¦

ğŸ” æŸ¥æ‰¾åŒ…å«SRTæ—¶é—´æˆ³çš„å…ƒç´ ...
æ‰¾åˆ° 14 ä¸ªæ—¶é—´æˆ³
  ç¬¬ä¸€ä¸ª: 00:00:00,000 --> 00:00:05,000
  æœ€åä¸€ä¸ª: 00:00:58,000 --> 00:01:00,000

ğŸ” å°è¯•æå–å®Œæ•´çš„SRTå†…å®¹...
âœ… æå–åˆ°SRTå†…å®¹:
  é•¿åº¦: 1500 å­—ç¬¦
  å‰200å­—ç¬¦: 1
00:00:00,000 --> 00:00:05,000
The glamorous facade...
  ğŸ’¾ å·²ä¿å­˜åˆ°: step_23_response_20241209_110949_extracted.srt

============================================================
âœ… åˆ†æå®Œæˆ
============================================================
```

## å¸¸è§é—®é¢˜

### Q1: ä¸ºä»€ä¹ˆæ²¡æœ‰ç”ŸæˆHTMLæ–‡ä»¶ï¼Ÿ

**A:** æ£€æŸ¥é…ç½®ï¼š
```python
# config.py
SAVE_DEBUG_HTML = True  # ç¡®ä¿ä¸º True
```

### Q2: åˆ†æå·¥å…·æŠ¥é”™ "No module named 'bs4'"

**A:** å®‰è£…ä¾èµ–ï¼š
```bash
pip install beautifulsoup4
```

### Q3: HTMLæ–‡ä»¶å¾ˆå¤§ï¼Œæµè§ˆå™¨æ‰“ä¸å¼€

**A:** ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æŸ¥çœ‹ï¼š
```bash
# æŸ¥çœ‹å‰100è¡Œ
head -100 assets/Process_Folder/Episode3/debug/step_23_response_*.html

# æœç´¢SRTæ—¶é—´æˆ³
grep -n "00:00:00" assets/Process_Folder/Episode3/debug/step_23_response_*.html
```

### Q4: æ‰¾åˆ°äº†SRTå†…å®¹ï¼Œä½†æå–å¤±è´¥

**A:** æ ¹æ®HTMLç»“æ„è°ƒæ•´é€‰æ‹©å™¨ï¼š

1. æŸ¥çœ‹åˆ†æå·¥å…·çš„è¾“å‡º
2. ç¡®å®šSRTå†…å®¹åœ¨å“ªä¸ªå…ƒç´ ä¸­
3. ä¿®æ”¹ `extract_srt_from_download_button()` æ–¹æ³•
4. æ·»åŠ æ–°çš„é€‰æ‹©å™¨æˆ–æå–é€»è¾‘

## æ–‡ä»¶ç»“æ„

```
assets/Process_Folder/
â””â”€â”€ Episode3/
    â”œâ”€â”€ debug/
    â”‚   â”œâ”€â”€ step_23_response_20241209_110949.html  # HTMLæ–‡ä»¶
    â”‚   â”œâ”€â”€ step_23_text_20241209_110949.txt       # æ–‡æœ¬æ–‡ä»¶
    â”‚   â””â”€â”€ step_23_response_20241209_110949_extracted.srt  # æå–çš„SRT
    â”œâ”€â”€ step_23_output_1.srt  # æœ€ç»ˆè¾“å‡º
    â””â”€â”€ step_23_output_2.srt
```

## ç›¸å…³æ–‡æ¡£

- [v1.8.3æ›´æ–°è¯´æ˜.md](doc/v1.8.3æ›´æ–°è¯´æ˜.md) - è¯¦ç»†çš„æ›´æ–°è¯´æ˜
- [v1.8.3å¿«é€Ÿå‚è€ƒ.md](doc/v1.8.3å¿«é€Ÿå‚è€ƒ.md) - å¿«é€Ÿå‚è€ƒ
- [STEP23_EXTRACTION_FIX.md](STEP23_EXTRACTION_FIX.md) - æå–ä¿®å¤è¯´æ˜

## æŠ€æœ¯æ”¯æŒ

å¦‚æœé—®é¢˜ä»ç„¶å­˜åœ¨ï¼š

1. æ”¶é›†è°ƒè¯•æ–‡ä»¶ï¼ˆHTMLã€æ–‡æœ¬ã€æ—¥å¿—ï¼‰
2. è¿è¡Œåˆ†æå·¥å…·å¹¶ä¿å­˜è¾“å‡º
3. æä¾›é¡µé¢æˆªå›¾
4. æè¿°é¢„æœŸè¡Œä¸ºå’Œå®é™…è¡Œä¸º
