# ğŸ“¦ æ‰“åŒ…è¯´æ˜

å°†è§†é¢‘å¤„ç†è‡ªåŠ¨åŒ–å·¥å…·æ‰“åŒ…ä¸ºç‹¬ç«‹çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### Windows

```bash
# æ–¹æ³•1ï¼šä½¿ç”¨æ‰¹å¤„ç†æ–‡ä»¶ï¼ˆæ¨èï¼‰
build.bat

# æ–¹æ³•2ï¼šä½¿ç”¨ Python è„šæœ¬
python build.py
```

### macOS / Linux

```bash
# æ–¹æ³•1ï¼šä½¿ç”¨ Shell è„šæœ¬ï¼ˆæ¨èï¼‰
chmod +x build.sh
./build.sh

# æ–¹æ³•2ï¼šä½¿ç”¨ Python è„šæœ¬
python3 build.py
```

---

## ğŸ“‹ å‰ç½®è¦æ±‚

### å¿…éœ€

- Python 3.8+
- pip

### è‡ªåŠ¨å®‰è£…

æ‰“åŒ…è„šæœ¬ä¼šè‡ªåŠ¨å®‰è£…ï¼š
- PyInstaller

---

## ğŸ”§ æ‰“åŒ…æ–¹å¼

### æ–¹å¼1ï¼šä½¿ç”¨æ‰“åŒ…è„šæœ¬ï¼ˆæ¨èï¼‰

**ä¼˜ç‚¹**ï¼š
- âœ… è‡ªåŠ¨æ£€æŸ¥ä¾èµ–
- âœ… è‡ªåŠ¨å®‰è£… PyInstaller
- âœ… è‡ªåŠ¨æ¸…ç†æ—§æ–‡ä»¶
- âœ… æ˜¾ç¤ºè¯¦ç»†è¿›åº¦
- âœ… åˆ›å»ºè¯´æ˜æ–‡ä»¶

**ä½¿ç”¨**ï¼š
```bash
# Windows
build.bat

# macOS/Linux
./build.sh

# æˆ–ä½¿ç”¨ Python è„šæœ¬ï¼ˆè·¨å¹³å°ï¼‰
python build.py
```

### æ–¹å¼2ï¼šæ‰‹åŠ¨æ‰“åŒ…

**æ­¥éª¤**ï¼š

1. å®‰è£… PyInstaller
```bash
pip install pyinstaller
```

2. æ¸…ç†æ—§æ–‡ä»¶
```bash
rm -rf build dist
```

3. æ‰“åŒ…
```bash
# ä½¿ç”¨ spec æ–‡ä»¶
pyinstaller build.spec --clean

# æˆ–ä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°
pyinstaller \
    --name=VideoAutomation \
    --onedir \
    --console \
    --clean \
    video_automation.py
```

---

## ğŸ“ è¾“å‡ºç»“æ„

```
dist/
â””â”€â”€ VideoAutomation/
    â”œâ”€â”€ VideoAutomation.exe (Windows)
    â”œâ”€â”€ VideoAutomation (macOS/Linux)
    â”œâ”€â”€ _internal/
    â”‚   â”œâ”€â”€ Python è¿è¡Œæ—¶
    â”‚   â”œâ”€â”€ ä¾èµ–åº“
    â”‚   â””â”€â”€ èµ„æºæ–‡ä»¶
    â”œâ”€â”€ config.py
    â”œâ”€â”€ README.md
    â””â”€â”€ å…¶ä»–æ–‡ä»¶
```

---

## âš™ï¸ æ‰“åŒ…é…ç½®

### build.spec æ–‡ä»¶

```python
# ä¸»è¦é…ç½®é¡¹

# å…¥å£æ–‡ä»¶
['video_automation.py']

# åŒ…å«çš„æ•°æ®æ–‡ä»¶
datas=[
    ('config.py', '.'),
    ('README.md', '.'),
    ('*.md', '.'),
]

# éšè—å¯¼å…¥
hiddenimports=[
    'playwright',
    'pandas',
    'openpyxl',
]

# å¯æ‰§è¡Œæ–‡ä»¶é…ç½®
name='VideoAutomation'
console=True  # æ˜¾ç¤ºæ§åˆ¶å°
```

### è‡ªå®šä¹‰é…ç½®

ç¼–è¾‘ `build.spec` æ–‡ä»¶ï¼š

```python
# æ·»åŠ å›¾æ ‡
icon='icon.ico'

# éšè—æ§åˆ¶å°ï¼ˆä¸æ¨èï¼‰
console=False

# å•æ–‡ä»¶æ‰“åŒ…ï¼ˆè¾ƒæ…¢ï¼‰
# ä¿®æ”¹ EXE éƒ¨åˆ†
exe = EXE(
    pyz,
    a.scripts,
    a.binaries,  # æ·»åŠ è¿™è¡Œ
    a.zipfiles,  # æ·»åŠ è¿™è¡Œ
    a.datas,     # æ·»åŠ è¿™è¡Œ
    [],
    name='VideoAutomation',
    onefile=True,  # å•æ–‡ä»¶
)
```

---

## ğŸ§ª æµ‹è¯•æ‰“åŒ…ç»“æœ

### 1. æ£€æŸ¥æ–‡ä»¶

```bash
cd dist/VideoAutomation
ls -lh  # macOS/Linux
dir     # Windows
```

### 2. è¿è¡Œæµ‹è¯•

```bash
# Windows
VideoAutomation.exe

# macOS/Linux
./VideoAutomation
```

### 3. éªŒè¯åŠŸèƒ½

- âœ… ç¨‹åºæ­£å¸¸å¯åŠ¨
- âœ… æµè§ˆå™¨æ­£å¸¸æ‰“å¼€
- âœ… é…ç½®æ–‡ä»¶æ­£å¸¸è¯»å–
- âœ… æ—¥å¿—æ­£å¸¸è¾“å‡º
- âœ… æˆªå›¾æ­£å¸¸ä¿å­˜

---

## ğŸ“¦ åˆ†å‘

### å‹ç¼©æ‰“åŒ…

```bash
# Windows
cd dist
tar -czf VideoAutomation-v1.3.7-windows.zip VideoAutomation/

# macOS/Linux
cd dist
tar -czf VideoAutomation-v1.3.7-macos.tar.gz VideoAutomation/
```

### åˆ†å‘æ¸…å•

æ‰“åŒ…ååŒ…å«ï¼š
- âœ… å¯æ‰§è¡Œæ–‡ä»¶
- âœ… Python è¿è¡Œæ—¶
- âœ… æ‰€æœ‰ä¾èµ–åº“
- âœ… é…ç½®æ–‡ä»¶
- âœ… æ–‡æ¡£æ–‡ä»¶

ç”¨æˆ·æ— éœ€å®‰è£…ï¼š
- âŒ Python
- âŒ pip
- âŒ ä¾èµ–åº“

ç”¨æˆ·ä»éœ€ï¼š
- âœ… å®‰è£… Playwright æµè§ˆå™¨ï¼ˆé¦–æ¬¡è¿è¡Œï¼‰
- âœ… å‡†å¤‡è§†é¢‘å’Œé…ç½®æ–‡ä»¶

---

## ğŸ› å¸¸è§é—®é¢˜

### é—®é¢˜1ï¼šPyInstaller æœªæ‰¾åˆ°

**ç—‡çŠ¶**ï¼š
```
'pyinstaller' ä¸æ˜¯å†…éƒ¨æˆ–å¤–éƒ¨å‘½ä»¤
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
pip install pyinstaller
```

### é—®é¢˜2ï¼šæ‰“åŒ…å¤±è´¥

**ç—‡çŠ¶**ï¼š
```
ModuleNotFoundError: No module named 'xxx'
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
åœ¨ `build.spec` ä¸­æ·»åŠ éšè—å¯¼å…¥ï¼š
```python
hiddenimports=[
    'xxx',  # æ·»åŠ ç¼ºå¤±çš„æ¨¡å—
]
```

### é—®é¢˜3ï¼šè¿è¡Œæ—¶ç¼ºå°‘æ–‡ä»¶

**ç—‡çŠ¶**ï¼š
```
FileNotFoundError: config.py
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
åœ¨ `build.spec` ä¸­æ·»åŠ æ•°æ®æ–‡ä»¶ï¼š
```python
datas=[
    ('config.py', '.'),
]
```

### é—®é¢˜4ï¼šPlaywright æµè§ˆå™¨æœªå®‰è£…

**ç—‡çŠ¶**ï¼š
```
Executable doesn't exist at xxx
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
é¦–æ¬¡è¿è¡Œåéœ€è¦å®‰è£…æµè§ˆå™¨ï¼š
```bash
# åœ¨æ‰“åŒ…ç›®å½•ä¸­
cd dist/VideoAutomation
python -m playwright install chromium
```

æˆ–åœ¨ä»£ç ä¸­æ·»åŠ è‡ªåŠ¨å®‰è£…ï¼š
```python
import subprocess
subprocess.run(["playwright", "install", "chromium"])
```

### é—®é¢˜5ï¼šæ–‡ä»¶å¤ªå¤§

**ç—‡çŠ¶**ï¼š
- æ‰“åŒ…åæ–‡ä»¶è¶…è¿‡ 100MB

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. ä½¿ç”¨ UPX å‹ç¼©
```python
# build.spec
upx=True
```

2. æ’é™¤ä¸éœ€è¦çš„æ¨¡å—
```python
# build.spec
excludes=[
    'tkinter',
    'matplotlib',
]
```

3. ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒæ‰“åŒ…
```bash
python -m venv venv
source venv/bin/activate  # Linux/Mac
venv\Scripts\activate     # Windows
pip install -r requirements.txt
python build.py
```

---

## ğŸ’¡ ä¼˜åŒ–å»ºè®®

### 1. å‡å°æ–‡ä»¶å¤§å°

```python
# build.spec
excludes=[
    'tkinter',
    'matplotlib',
    'scipy',
    'numpy',  # å¦‚æœä¸éœ€è¦
]
```

### 2. åŠ å¿«å¯åŠ¨é€Ÿåº¦

```python
# ä½¿ç”¨ onedir è€Œä¸æ˜¯ onefile
# onedir: å¯åŠ¨å¿«ï¼Œæ–‡ä»¶å¤š
# onefile: å¯åŠ¨æ…¢ï¼Œå•æ–‡ä»¶
```

### 3. æ·»åŠ å›¾æ ‡

```python
# build.spec
icon='icon.ico'  # Windows
icon='icon.icns'  # macOS
```

### 4. æ·»åŠ ç‰ˆæœ¬ä¿¡æ¯

åˆ›å»º `version.txt`ï¼š
```
VSVersionInfo(
  ffi=FixedFileInfo(
    filevers=(1, 3, 7, 0),
    prodvers=(1, 3, 7, 0),
  ),
  kids=[
    StringFileInfo([
      StringTable('040904B0', [
        StringStruct('CompanyName', 'Your Company'),
        StringStruct('FileDescription', 'Video Automation Tool'),
        StringStruct('FileVersion', '1.3.7'),
        StringStruct('ProductName', 'VideoAutomation'),
        StringStruct('ProductVersion', '1.3.7'),
      ])
    ]),
  ]
)
```

ç„¶ååœ¨ `build.spec` ä¸­ï¼š
```python
exe = EXE(
    ...
    version='version.txt',
)
```

---

## ğŸ“Š æ‰“åŒ…ç»Ÿè®¡

### æ–‡ä»¶å¤§å°

| å¹³å° | å¤§å° | æ–‡ä»¶æ•° |
|------|------|--------|
| Windows | ~80MB | ~150 |
| macOS | ~75MB | ~140 |
| Linux | ~70MB | ~130 |

### æ‰“åŒ…æ—¶é—´

| å¹³å° | æ—¶é—´ |
|------|------|
| Windows | ~2-3 åˆ†é’Ÿ |
| macOS | ~2-3 åˆ†é’Ÿ |
| Linux | ~2-3 åˆ†é’Ÿ |

---

## ğŸ¯ æœ€ä½³å®è·µ

### 1. ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒ

```bash
# åˆ›å»ºå¹²å‡€çš„è™šæ‹Ÿç¯å¢ƒ
python -m venv venv_build
source venv_build/bin/activate
pip install -r requirements.txt
pip install pyinstaller
python build.py
```

### 2. æµ‹è¯•å¤šä¸ªå¹³å°

- Windows 10/11
- macOS 10.15+
- Ubuntu 20.04+

### 3. ç‰ˆæœ¬ç®¡ç†

```bash
# æ‰“åŒ…æ—¶åŒ…å«ç‰ˆæœ¬å·
VideoAutomation-v1.3.7-windows.zip
VideoAutomation-v1.3.7-macos.tar.gz
VideoAutomation-v1.3.7-linux.tar.gz
```

### 4. æä¾›å®Œæ•´æ–‡æ¡£

- README.md
- ä½¿ç”¨æŒ‡å—.md
- å¸¸è§é—®é¢˜.md
- æ›´æ–°æ—¥å¿—.md

---

## ğŸ“ æ£€æŸ¥æ¸…å•

æ‰“åŒ…å‰ï¼š
- [ ] æ›´æ–°ç‰ˆæœ¬å·
- [ ] æµ‹è¯•æ‰€æœ‰åŠŸèƒ½
- [ ] æ›´æ–°æ–‡æ¡£
- [ ] æ¸…ç†ä¸´æ—¶æ–‡ä»¶

æ‰“åŒ…åï¼š
- [ ] æµ‹è¯•å¯æ‰§è¡Œæ–‡ä»¶
- [ ] æ£€æŸ¥æ–‡ä»¶å¤§å°
- [ ] éªŒè¯æ‰€æœ‰åŠŸèƒ½
- [ ] æµ‹è¯•ä¸åŒç³»ç»Ÿ

åˆ†å‘å‰ï¼š
- [ ] å‹ç¼©æ‰“åŒ…
- [ ] åˆ›å»ºå‘å¸ƒè¯´æ˜
- [ ] ä¸Šä¼ åˆ°å‘å¸ƒå¹³å°
- [ ] é€šçŸ¥ç”¨æˆ·

---

## ğŸ‰ æ€»ç»“

### æ‰“åŒ…æµç¨‹

```
å‡†å¤‡ â†’ å®‰è£…ä¾èµ– â†’ é…ç½® â†’ æ‰“åŒ… â†’ æµ‹è¯• â†’ åˆ†å‘
```

### å…³é”®å‘½ä»¤

```bash
# å¿«é€Ÿæ‰“åŒ…
python build.py

# æ‰‹åŠ¨æ‰“åŒ…
pyinstaller build.spec --clean

# æµ‹è¯•
cd dist/VideoAutomation && ./VideoAutomation
```

### è¾“å‡º

- ç‹¬ç«‹å¯æ‰§è¡Œæ–‡ä»¶
- æ— éœ€ Python ç¯å¢ƒ
- åŒ…å«æ‰€æœ‰ä¾èµ–
- å¯ç›´æ¥åˆ†å‘

---

**æ›´æ–°æ—¥æœŸ**: 2024-12-05  
**ç‰ˆæœ¬**: v1.3.7
