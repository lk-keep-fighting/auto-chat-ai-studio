# ğŸ“Š æ•°æ®è§£æè¯´æ˜

æ™ºèƒ½è§£æ AI å“åº”ä¸­çš„è¡¨æ ¼æ•°æ®ï¼Œæå–ç»“æ„åŒ–å­—æ®µã€‚

---

## ğŸ¯ åŠŸèƒ½æ¦‚è¿°

### è§£å†³çš„é—®é¢˜

**æ­¥éª¤25æ•°æ®æå–**ï¼š
- ä¹‹å‰ï¼šåªä¿å­˜åŸå§‹æ–‡æœ¬
- ç°åœ¨ï¼šè‡ªåŠ¨è§£æä¸ºç»“æ„åŒ–æ•°æ®

### æ”¯æŒçš„å­—æ®µ

æ­¥éª¤25åº”è¾“å‡ºä»¥ä¸‹å­—æ®µï¼š

- `filename` - æ–‡ä»¶å
- `start` - å¼€å§‹æ—¶é—´
- `end` - ç»“æŸæ—¶é—´
- `Folder` - æ–‡ä»¶å¤¹1
- `Folder2` - æ–‡ä»¶å¤¹2
- `Folder3` - æ–‡ä»¶å¤¹3
- `music` - éŸ³ä¹
- `cover_time` - å°é¢æ—¶é—´
- `title` - æ ‡é¢˜

---

## ğŸ“ æ”¯æŒçš„æ ¼å¼

### 1. Markdown è¡¨æ ¼ï¼ˆæ¨èï¼‰

```markdown
| filename | start | end   | Folder | Folder2 | Folder3 | music | cover_time | title |
|----------|-------|-------|--------|---------|---------|-------|------------|-------|
| video1   | 00:05 | 00:15 | åˆ†ç±»1  | å­åˆ†ç±»1 | æ ‡ç­¾1   | BGM1  | 00:10      | æ ‡é¢˜1 |
| video1   | 00:20 | 00:35 | åˆ†ç±»2  | å­åˆ†ç±»2 | æ ‡ç­¾2   | BGM2  | 00:25      | æ ‡é¢˜2 |
```

**ä¼˜ç‚¹**ï¼š
- âœ… æ˜“è¯»æ˜“å†™
- âœ… AI å¸¸ç”¨æ ¼å¼
- âœ… è§£æå‡†ç¡®

### 2. JSON æ ¼å¼

```json
[
    {
        "filename": "video1",
        "start": "00:05",
        "end": "00:15",
        "Folder": "åˆ†ç±»1",
        "Folder2": "å­åˆ†ç±»1",
        "Folder3": "æ ‡ç­¾1",
        "music": "BGM1",
        "cover_time": "00:10",
        "title": "æ ‡é¢˜1"
    }
]
```

**ä¼˜ç‚¹**ï¼š
- âœ… ç»“æ„åŒ–
- âœ… æ˜“äºè§£æ
- âœ… æ”¯æŒåµŒå¥—

### 3. CSV æ ¼å¼

```csv
filename,start,end,Folder,Folder2,Folder3,music,cover_time,title
video1,00:05,00:15,åˆ†ç±»1,å­åˆ†ç±»1,æ ‡ç­¾1,BGM1,00:10,æ ‡é¢˜1
video1,00:20,00:35,åˆ†ç±»2,å­åˆ†ç±»2,æ ‡ç­¾2,BGM2,00:25,æ ‡é¢˜2
```

**ä¼˜ç‚¹**ï¼š
- âœ… ç®€å•
- âœ… é€šç”¨
- âœ… æ˜“äºå¯¼å…¥

---

## ğŸ”§ ä½¿ç”¨æ–¹æ³•

### è‡ªåŠ¨è§£æ

ç¨‹åºä¼šè‡ªåŠ¨è§£ææ­¥éª¤25çš„è¾“å‡ºï¼š

```python
# 1. æå–å“åº”
response = self.extract_response()

# 2. è‡ªåŠ¨è§£æ
parsed_data = self.parse_table_response(response)

# 3. ä¿å­˜ä¸º Excel
if parsed_data:
    df = pd.DataFrame(parsed_data)
    df.to_excel('output.xlsx')
```

### æ‰‹åŠ¨è§£æ

```python
from video_automation import VideoProcessor

processor = VideoProcessor()

# è§£ææ–‡æœ¬
text = """
| cover_time | title |
|------------|-------|
| 00:05      | æ ‡é¢˜1 |
"""

data = processor.parse_table_response(text)
print(data)
# [{'cover_time': '00:05', 'title': 'æ ‡é¢˜1'}]
```

---

## ğŸ“Š è§£ææµç¨‹

```
AI å“åº”æ–‡æœ¬
    â†“
æ£€æŸ¥æ˜¯å¦åŒ…å«è¡¨æ ¼æ ‡è®° (|)
    â†“ æ˜¯
è§£æ Markdown è¡¨æ ¼
    â†“ æˆåŠŸ
è¿”å›ç»“æ„åŒ–æ•°æ®
    â†“
    
    â†“ å¦
æ£€æŸ¥æ˜¯å¦åŒ…å« JSON ([...])
    â†“ æ˜¯
è§£æ JSON
    â†“ æˆåŠŸ
è¿”å›ç»“æ„åŒ–æ•°æ®
    â†“
    
    â†“ å¦
å°è¯•è§£æ CSV
    â†“ æˆåŠŸ
è¿”å›ç»“æ„åŒ–æ•°æ®
    â†“
    
    â†“ å¤±è´¥
è¿”å› Noneï¼ˆä¿å­˜åŸå§‹æ–‡æœ¬ï¼‰
```

---

## ğŸ’¡ æç¤ºè¯ä¼˜åŒ–

### æ¨èæ ¼å¼

```
è¯·ä»¥ Markdown è¡¨æ ¼æ ¼å¼è¾“å‡ºæ•°æ®ï¼ŒåŒ…å«ä»¥ä¸‹åˆ—ï¼š

| filename | start | end | Folder | Folder2 | Folder3 | music | cover_time | title |
|----------|-------|-----|--------|---------|---------|-------|------------|-------|

è¦æ±‚ï¼š
1. filename: è§†é¢‘æ–‡ä»¶åï¼ˆä¸å«æ‰©å±•åï¼‰
2. start: ç‰‡æ®µå¼€å§‹æ—¶é—´ï¼ˆMM:SSæ ¼å¼ï¼‰
3. end: ç‰‡æ®µç»“æŸæ—¶é—´ï¼ˆMM:SSæ ¼å¼ï¼‰
4. Folder: ä¸€çº§åˆ†ç±»
5. Folder2: äºŒçº§åˆ†ç±»
6. Folder3: ä¸‰çº§åˆ†ç±»/æ ‡ç­¾
7. music: èƒŒæ™¯éŸ³ä¹åç§°
8. cover_time: å°é¢æˆªå–æ—¶é—´ï¼ˆMM:SSæ ¼å¼ï¼‰
9. title: ç‰‡æ®µæ ‡é¢˜
```

### ç¤ºä¾‹æç¤ºè¯

```
è¯·åˆ†æè§†é¢‘å†…å®¹ï¼Œæå–å…³é”®ç‰‡æ®µä¿¡æ¯ï¼Œä»¥ Markdown è¡¨æ ¼æ ¼å¼è¾“å‡ºï¼š

| filename | start | end   | Folder | Folder2 | Folder3 | music | cover_time | title |
|----------|-------|-------|--------|---------|---------|-------|------------|-------|
| video1   | 00:05 | 00:15 | æ•™ç¨‹   | å…¥é—¨    | åŸºç¡€    | BGM1  | 00:10      | å¼€åœº  |
| video1   | 00:20 | 00:45 | æ•™ç¨‹   | è¿›é˜¶    | æŠ€å·§    | BGM2  | 00:30      | ä¸»é¢˜  |

æ³¨æ„ï¼š
- filename: è§†é¢‘æ–‡ä»¶åï¼ˆä¸å«.mp4æ‰©å±•åï¼‰
- start: ç‰‡æ®µå¼€å§‹æ—¶é—´ï¼ˆMM:SSæ ¼å¼ï¼‰
- end: ç‰‡æ®µç»“æŸæ—¶é—´ï¼ˆMM:SSæ ¼å¼ï¼‰
- Folder: ä¸€çº§åˆ†ç±»ï¼ˆå¦‚ï¼šæ•™ç¨‹ã€å¨±ä¹ã€æ–°é—»ç­‰ï¼‰
- Folder2: äºŒçº§åˆ†ç±»ï¼ˆå¦‚ï¼šå…¥é—¨ã€è¿›é˜¶ç­‰ï¼‰
- Folder3: ä¸‰çº§åˆ†ç±»/æ ‡ç­¾ï¼ˆå¦‚ï¼šåŸºç¡€ã€æŠ€å·§ç­‰ï¼‰
- music: èƒŒæ™¯éŸ³ä¹åç§°
- cover_time: å°é¢æˆªå–æ—¶é—´ç‚¹ï¼ˆMM:SSæ ¼å¼ï¼‰
- title: ç‰‡æ®µæ ‡é¢˜ï¼ˆç®€çŸ­æœ‰åŠ›ï¼‰
```

---

## ğŸ” æ•°æ®éªŒè¯

### æ£€æŸ¥å¿…éœ€å­—æ®µ

```python
required_fields = [
    'filename', 'start', 'end', 
    'Folder', 'Folder2', 'Folder3',
    'music', 'cover_time', 'title'
]

for field in required_fields:
    if field not in df.columns:
        print(f"âŒ ç¼ºå°‘å¿…éœ€å­—æ®µ: {field}")
```

### æ£€æŸ¥æ•°æ®æ ¼å¼

```python
# æ£€æŸ¥ cover_time æ ¼å¼
import re
pattern = r'^\d{2}:\d{2}$'

for time in df['cover_time']:
    if not re.match(pattern, time):
        print(f"âš ï¸ æ—¶é—´æ ¼å¼é”™è¯¯: {time}")
```

### æ£€æŸ¥æ•°æ®å®Œæ•´æ€§

```python
# æ£€æŸ¥ç©ºå€¼
null_counts = df.isnull().sum()
print("ç©ºå€¼ç»Ÿè®¡:")
print(null_counts)

# æ£€æŸ¥é‡å¤
duplicates = df.duplicated().sum()
print(f"é‡å¤è¡Œæ•°: {duplicates}")
```

---

## ğŸ› ï¸ æ•°æ®æ¸…æ´—

### æ¸…ç†æ—¶é—´æ ¼å¼

```python
def clean_time(time_str):
    """æ¸…ç†æ—¶é—´æ ¼å¼"""
    # ç§»é™¤ç©ºæ ¼
    time_str = time_str.strip()
    
    # è¡¥é›¶
    if len(time_str) == 4:  # M:SS
        time_str = '0' + time_str
    
    return time_str

df['cover_time'] = df['cover_time'].apply(clean_time)
```

### æ¸…ç†æ–‡æœ¬

```python
def clean_text(text):
    """æ¸…ç†æ–‡æœ¬"""
    # ç§»é™¤é¦–å°¾ç©ºæ ¼
    text = text.strip()
    
    # ç§»é™¤ç‰¹æ®Šå­—ç¬¦
    text = re.sub(r'[^\w\s\u4e00-\u9fff]', '', text)
    
    return text

df['title'] = df['title'].apply(clean_text)
```

### è½¬æ¢æ•°æ®ç±»å‹

```python
# è½¬æ¢æ—¶é•¿ä¸ºæ•´æ•°
df['duration'] = df['duration'].astype(int)

# è½¬æ¢æ—¶é—´ä¸ºç§’æ•°
def time_to_seconds(time_str):
    parts = time_str.split(':')
    return int(parts[0]) * 60 + int(parts[1])

df['cover_time_sec'] = df['cover_time'].apply(time_to_seconds)
```

---

## ğŸ“ˆ æ—¥å¿—è¾“å‡º

### æˆåŠŸè§£æ

```
ğŸ’¾ ä¿å­˜è¾“å‡ºæ•°æ®åˆ°: assets/Process_Folder/video1/
ğŸ“Š æ­¥éª¤ 25 è§£æåˆ° 10 è¡Œ x 5 åˆ—æ•°æ®
ğŸ“‹ åˆ—å: cover_time, title, subtitle, music, duration
âœ… ä¿å­˜æ­¥éª¤ 25 æ•°æ®: step_25_output.xlsx
```

### è§£æå¤±è´¥

```
âš ï¸ æ— æ³•è§£æä¸ºç»“æ„åŒ–æ•°æ®ï¼Œå°†ä¿å­˜åŸå§‹æ–‡æœ¬
ğŸ“ æ­¥éª¤ 25 ä¿å­˜ä¸ºåŸå§‹æ–‡æœ¬
âœ… ä¿å­˜æ­¥éª¤ 25 æ•°æ®: step_25_output.xlsx
```

---

## ğŸ› æ•…éšœæ’é™¤

### é—®é¢˜1ï¼šè§£æå¤±è´¥

**æ£€æŸ¥å“åº”æ ¼å¼**ï¼š
```python
print("åŸå§‹å“åº”:")
print(response_text)
print("\næ ¼å¼æ£€æŸ¥:")
print("åŒ…å« |:", '|' in response_text)
print("åŒ…å« [:", '[' in response_text)
```

**æ‰‹åŠ¨æµ‹è¯•**ï¼š
```python
# æµ‹è¯• Markdown è§£æ
test_text = """
| cover_time | title |
|------------|-------|
| 00:05      | æµ‹è¯•  |
"""

result = processor.parse_table_response(test_text)
print(result)
```

### é—®é¢˜2ï¼šå­—æ®µç¼ºå¤±

**æ£€æŸ¥åˆ—å**ï¼š
```python
print("è§£æåˆ°çš„åˆ—å:")
print(df.columns.tolist())

print("\næœŸæœ›çš„åˆ—å:")
print(['cover_time', 'title', 'subtitle'])
```

**åˆ—åæ˜ å°„**ï¼š
```python
# å¦‚æœ AI ä½¿ç”¨äº†ä¸åŒçš„åˆ—å
column_mapping = {
    'time': 'cover_time',
    'name': 'title',
    'desc': 'subtitle'
}

df = df.rename(columns=column_mapping)
```

### é—®é¢˜3ï¼šæ•°æ®æ ¼å¼é”™è¯¯

**æ£€æŸ¥æ•°æ®**ï¼š
```python
print("æ•°æ®é¢„è§ˆ:")
print(df.head())

print("\næ•°æ®ç±»å‹:")
print(df.dtypes)

print("\næ•°æ®ç»Ÿè®¡:")
print(df.describe())
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [v1.4.0æ›´æ–°è¯´æ˜.md](v1.4.0æ›´æ–°è¯´æ˜.md) - ç‰ˆæœ¬æ›´æ–°
- [video_automation.py](video_automation.py) - æºä»£ç 
- [README.md](README.md) - é¡¹ç›®ä¸»é¡µ

---

## ğŸ‰ æ€»ç»“

### åŠŸèƒ½

- âœ… è‡ªåŠ¨è§£æè¡¨æ ¼æ•°æ®
- âœ… æ”¯æŒå¤šç§æ ¼å¼
- âœ… æå–ç»“æ„åŒ–å­—æ®µ
- âœ… æ™ºèƒ½å›é€€æœºåˆ¶

### ä¼˜åŠ¿

- âœ… æ— éœ€æ‰‹åŠ¨å¤„ç†
- âœ… æ•°æ®å®Œæ•´å‡†ç¡®
- âœ… å¯ç›´æ¥ä½¿ç”¨
- âœ… æ˜“äºæ‰©å±•

---

**æ›´æ–°æ—¥æœŸ**: 2024-12-05  
**ç‰ˆæœ¬**: v1.4.0
