# v1.7.4 ä¿®å¤è¯´æ˜

## é—®é¢˜

è¿è¡Œç¨‹åºæ—¶å‡ºç°é”™è¯¯ï¼š

```
âŒ è¯»å–è§†é¢‘åˆ—è¡¨å¤±è´¥: 'Duration'
âŒ æ²¡æœ‰æ‰¾åˆ°å¾…å¤„ç†çš„è§†é¢‘
```

## åŸå› 

VideoList.csv æ–‡ä»¶ä¸­çš„åˆ—åæœ‰å¤šä½™çš„ç©ºæ ¼ï¼š

```csv
Filename,line1,line2,Duration 
                          â†‘ è¿™é‡Œæœ‰ä¸ªç©ºæ ¼
```

å¯¼è‡´ pandas è¯»å–æ—¶åˆ—åæ˜¯ `"Duration "` è€Œä¸æ˜¯ `"Duration"`ï¼Œå¼•å‘ `KeyError`ã€‚

## è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ1ï¼šä¿®å¤CSVæ–‡ä»¶ï¼ˆæ¨èï¼‰

ç§»é™¤åˆ—åä¸­çš„ç©ºæ ¼ï¼š

```csv
# ä¿®å¤å‰
Filename,line1,line2,Duration 

# ä¿®å¤å
Filename,line1,line2,Duration
```

### æ–¹æ¡ˆ2ï¼šä»£ç è‡ªåŠ¨æ¸…ç†ï¼ˆå·²å®ç°ï¼‰

åœ¨ `load_video_list()` æ–¹æ³•ä¸­æ·»åŠ åˆ—åæ¸…ç†ï¼š

```python
def load_video_list(self):
    try:
        df = pd.read_csv(self.video_list_file)
        
        # æ¸…ç†åˆ—åï¼ˆå»é™¤å‰åç©ºæ ¼ï¼‰
        df.columns = df.columns.str.strip()
        
        videos = []
        for _, row in df.iterrows():
            video_info = {
                "filename": row["Filename"],
                "duration": row["Duration"]
            }
            # ...
```

**æ”¹è¿›æ•ˆæœ**ï¼š
- âœ… è‡ªåŠ¨å»é™¤åˆ—åå‰åçš„ç©ºæ ¼
- âœ… å®¹é”™æ€§æ›´å¼º
- âœ… é¿å…å› æ ¼å¼é—®é¢˜å¯¼è‡´çš„é”™è¯¯

### æ–¹æ¡ˆ3ï¼šå¢å¼ºé”™è¯¯æ—¥å¿—

æ·»åŠ æ›´è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯ï¼š

```python
except Exception as e:
    logger.error(f"âŒ è¯»å–è§†é¢‘åˆ—è¡¨å¤±è´¥: {e}")
    logger.error(f"   å¯ç”¨çš„åˆ—å: {list(df.columns) if 'df' in locals() else 'æ— æ³•è¯»å–'}")
    return []
```

**æ”¹è¿›æ•ˆæœ**ï¼š
- âœ… æ˜¾ç¤ºå®é™…çš„åˆ—å
- âœ… ä¾¿äºå¿«é€Ÿå®šä½é—®é¢˜
- âœ… æä¾›è°ƒè¯•ä¿¡æ¯

## éªŒè¯

### æµ‹è¯•è¯»å–

```bash
python3 -c "import pandas as pd; df = pd.read_csv('assets/Process_Folder/videos/VideoList.csv'); df.columns = df.columns.str.strip(); print('åˆ—å:', list(df.columns)); print('\næ•°æ®:'); print(df)"
```

**é¢„æœŸè¾“å‡º**ï¼š

```
åˆ—å: ['Filename', 'line1', 'line2', 'Duration']

æ•°æ®:
       Filename line1  line2 Duration
0  Episode3.mp4   bat    223  01:59.4
1  Episode1.mp4   bat    223  03:32.5
2  Episode2.mp4   bat    223  02:14.9
```

### è¿è¡Œç¨‹åº

```bash
python video_automation.py
```

**é¢„æœŸæ—¥å¿—**ï¼š

```
âœ… åŠ è½½äº† 3 ä¸ªè§†é¢‘
ğŸ¬ å¼€å§‹å¤„ç†è§†é¢‘: Episode3.mp4
âœ… æ›´æ–°æç¤ºè¯æ–‡ä»¶: Episode3.mp4 - 01:59.4
   line1: bat
   line2: 223
```

## æ–‡ä»¶å˜æ›´

### ä¿®æ”¹çš„æ–‡ä»¶

1. **video_automation.py**
   - æ·»åŠ åˆ—åæ¸…ç†ï¼š`df.columns = df.columns.str.strip()`
   - å¢å¼ºé”™è¯¯æ—¥å¿—

2. **assets/Process_Folder/videos/VideoList.csv**
   - ç§»é™¤ `Duration` åˆ—ååçš„ç©ºæ ¼

## é¢„é˜²æªæ–½

### CSVæ–‡ä»¶æ ¼å¼è§„èŒƒ

1. **åˆ—åä¸è¦æœ‰ç©ºæ ¼**
   ```csv
   # æ­£ç¡®
   Filename,line1,line2,Duration
   
   # é”™è¯¯
   Filename,line1,line2,Duration 
   ```

2. **ä½¿ç”¨æ ‡å‡†ç¼–ç **
   - UTF-8 ç¼–ç 
   - Unix æ¢è¡Œç¬¦ï¼ˆLFï¼‰

3. **æ£€æŸ¥å·¥å…·**
   ```bash
   # æ£€æŸ¥åˆ—å
   head -1 assets/Process_Folder/videos/VideoList.csv | cat -A
   
   # å¦‚æœçœ‹åˆ° Duration $ è¯´æ˜æœ‰ç©ºæ ¼
   # åº”è¯¥æ˜¯ Duration$
   ```

## å¸¸è§é—®é¢˜

### Q1: ä¸ºä»€ä¹ˆä¼šæœ‰ç©ºæ ¼ï¼Ÿ

**åŸå› **ï¼š
- Excel å¯¼å‡ºæ—¶å¯èƒ½æ·»åŠ ç©ºæ ¼
- æ‰‹åŠ¨ç¼–è¾‘æ—¶ä¸å°å¿ƒæ·»åŠ 
- ä¸åŒç¼–è¾‘å™¨çš„æ ¼å¼é—®é¢˜

### Q2: å¦‚ä½•é¿å…ï¼Ÿ

**å»ºè®®**ï¼š
- ä½¿ç”¨ä»£ç ç”ŸæˆCSVæ–‡ä»¶
- ä½¿ç”¨ä¸“ä¸šçš„CSVç¼–è¾‘å™¨
- å¯ç”¨ç¼–è¾‘å™¨çš„"æ˜¾ç¤ºç©ºç™½å­—ç¬¦"åŠŸèƒ½

### Q3: è¿˜æœ‰å…¶ä»–ç±»ä¼¼é—®é¢˜å—ï¼Ÿ

**å¯èƒ½çš„é—®é¢˜**ï¼š
- åˆ—åä¸­çš„ç‰¹æ®Šå­—ç¬¦
- ä¸å¯è§å­—ç¬¦ï¼ˆBOMã€é›¶å®½å­—ç¬¦ï¼‰
- ç¼–ç é—®é¢˜

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ä»£ç ä¸­ç»Ÿä¸€æ¸…ç†ï¼š`df.columns = df.columns.str.strip()`
- ä½¿ç”¨æ ‡å‡†çš„CSVç”Ÿæˆå·¥å…·

## æ€»ç»“

v1.7.4 å¢åŠ äº†åˆ—åæ¸…ç†åŠŸèƒ½ï¼Œè‡ªåŠ¨å»é™¤CSVæ–‡ä»¶åˆ—åä¸­çš„å‰åç©ºæ ¼ï¼Œæé«˜äº†ç¨‹åºçš„å®¹é”™æ€§ã€‚åŒæ—¶ä¿®å¤äº† VideoList.csv æ–‡ä»¶ä¸­çš„æ ¼å¼é—®é¢˜ã€‚

**å…³é”®æ”¹è¿›**ï¼š
- âœ… è‡ªåŠ¨æ¸…ç†åˆ—åç©ºæ ¼
- âœ… å¢å¼ºé”™è¯¯æ—¥å¿—
- âœ… ä¿®å¤CSVæ–‡ä»¶æ ¼å¼
- âœ… æé«˜å®¹é”™æ€§
