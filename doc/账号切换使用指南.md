# 账号切换使用指南

> v1.6.0 新增功能：自动 Google 账号切换

---

## 📖 概述

当遇到 "You've reached your rate limit" 错误时，程序会自动切换到下一个可用的 Google 账号，无需人工干预。

---

## 🎯 准备工作

### 1. 准备多个 Google 账号

**推荐数量**：3-5 个账号

**要求**：
- 都有 Google AI Studio 访问权限
- 都登录到系统 Chrome 浏览器

---

### 2. 登录所有账号到 Chrome

**步骤**：
```
1. 打开 Chrome
2. 点击右上角头像
3. 点击"添加账号"
4. 登录第一个账号
5. 重复步骤 2-4，登录所有账号
```

**验证**：
```
点击 Chrome 右上角头像
应该看到所有已登录的账号列表
```

---

## 🚀 自动切换流程

### 正常流程

```
处理视频
  ↓
发送步骤 10
  ↓
等待 AI 响应
  ↓
⚠️ 检测到: You've reached your rate limit
  ↓
🔄 自动切换账号
  ├─ 点击账号按钮
  ├─ 点击"切换账号"
  ├─ 跳转到 Google 账号页面
  ├─ 选择下一个可用账号
  └─ 返回 AI Studio
  ↓
🔄 自动重新发送步骤 10
  ↓
✅ 继续处理
```

---

### 日志输出

```
⏳ 等待 AI 响应步骤 10...
⚠️ 检测到速率限制: You've reached your rate limit
⚠️ 检测到速率限制，尝试切换账号...

============================================================
🔄 开始切换账号
============================================================
📧 当前账号: user1@gmail.com
1️⃣ 点击账号切换按钮...
✅ 已点击账号切换按钮
2️⃣ 点击切换账号按钮...
✅ 已点击切换账号按钮
3️⃣ 等待跳转到账号切换页面...
✅ 已跳转到 Google 账号切换页面
4️⃣ 选择下一个可用账号...
📧 选择账号: user2@gmail.com
✅ 已点击账号
5️⃣ 等待返回 AI Studio...
✅ 已返回 AI Studio
============================================================
✅ 账号切换完成
📊 已切换账号数: 2
============================================================

✅ 账号切换成功，重新发送请求
🔄 账号已切换，重新发送步骤 10
```

---

## 📊 使用场景

### 场景1：自动切换（推荐）

**条件**：
- 有多个已登录的账号
- 账号都有 AI Studio 权限

**流程**：
```
账号1 处理 → rate limit → 自动切换到账号2
账号2 处理 → rate limit → 自动切换到账号3
账号3 处理 → rate limit → 自动切换到账号4
...
```

**优点**：
- ✅ 完全自动化
- ✅ 无需人工干预
- ✅ 高效稳定

---

### 场景2：手动选择

**条件**：
- 没有找到可用账号
- 需要特定账号

**流程**：
```
检测到 rate limit
  ↓
尝试自动切换
  ↓
⚠️ 没有找到可用的账号
💡 提示: 可能需要手动选择账号
  ↓
请手动选择一个账号，然后按 Enter 继续...
👉 选择完成后按 Enter: [用户手动选择]
  ↓
✅ 继续处理
```

---

### 场景3：切换失败

**条件**：
- 自动切换失败
- 网络问题

**流程**：
```
检测到 rate limit
  ↓
尝试自动切换
  ↓
❌ 账号切换失败
  ↓
可选操作:
  1. 输入 'retry' - 重试切换账号
  2. 输入 'manual' - 手动切换后继续
  3. 输入 'skip' - 跳过当前视频
  4. 输入 'quit' - 退出程序
  ↓
👉 请输入操作: manual
  ↓
请手动切换账号，完成后按 Enter 继续...
```

---

## 💡 最佳实践

### 1. 账号准备

**推荐配置**：
```
账号1: 主账号
账号2: 备用账号1
账号3: 备用账号2
账号4: 备用账号3
账号5: 备用账号4
```

**好处**：
- 5 个账号可以处理更多视频
- 遇到 rate limit 自动轮换
- 提高处理效率

---

### 2. 批量处理策略

**小批次**（推荐新手）：
```
每批 5 个视频
每个账号处理 1 批
5 个账号 = 25 个视频
```

**中批次**（推荐常规使用）：
```
每批 10 个视频
每个账号处理 2 批
5 个账号 = 100 个视频
```

**大批次**（推荐高级用户）：
```
每批 20 个视频
每个账号处理 5 批
5 个账号 = 500 个视频
```

---

### 3. 时间规划

**Rate Limit 重置**：
- 通常 24 小时后重置
- 具体时间取决于 Google 策略

**策略**：
```
第1天:
- 使用账号 1-3
- 处理 300 个视频

第2天:
- 使用账号 4-5
- 处理 200 个视频
- 账号 1-3 可能已重置

第3天:
- 使用账号 1-3（已重置）
- 继续处理
```

---

## 🔧 故障排除

### 问题1：找不到账号切换按钮

**原因**：
- 页面未完全加载
- 按钮选择器变化

**解决方案**：
```
1. 等待页面完全加载
2. 手动点击账号按钮
3. 按 Enter 继续
```

---

### 问题2：没有可用账号

**原因**：
- 所有账号都达到 rate limit
- 没有登录其他账号

**解决方案**：
```
方案A: 手动选择
1. 输入 'manual'
2. 手动切换到其他账号
3. 按 Enter 继续

方案B: 等待重置
1. 输入 'quit' 退出
2. 等待 24 小时
3. 重新运行程序
```

---

### 问题3：切换后仍然 rate limit

**原因**：
- 新账号也达到 rate limit
- 账号记录错误

**解决方案**：
```
1. 输入 'retry' 重试
2. 或输入 'manual' 手动选择其他账号
3. 检查账号是否有 AI Studio 权限
```

---

## 📊 监控和统计

### 查看已切换账号数

**日志输出**：
```
📊 已切换账号数: 3
```

**含义**：
- 已经使用了 3 个账号
- 包括初始账号
- 还有其他账号可用

---

### 查看当前账号

**日志输出**：
```
📧 当前账号: user3@gmail.com
```

**含义**：
- 当前正在使用 user3@gmail.com
- 如果遇到 rate limit 会切换到下一个

---

### 查看切换历史

**日志文件**：
```bash
grep "账号切换" automation.log
```

**输出示例**：
```
2024-12-05 10:00:00 - 🔄 开始切换账号
2024-12-05 10:00:05 - 📧 当前账号: user1@gmail.com
2024-12-05 10:00:10 - 📧 选择账号: user2@gmail.com
2024-12-05 10:00:15 - ✅ 账号切换完成
```

---

## 🎯 效率提升

### 之前（手动切换）

**流程**：
```
处理 10 个视频
  ↓
遇到 rate limit
  ↓
[程序暂停]
  ↓
手动切换账号
  ↓
手动重新运行
  ↓
继续处理
```

**时间**：
- 处理时间: 30 分钟
- 切换时间: 5 分钟
- 总时间: 35 分钟

---

### 现在（自动切换）

**流程**：
```
处理 10 个视频
  ↓
遇到 rate limit
  ↓
自动切换账号（30秒）
  ↓
自动继续处理
  ↓
完成
```

**时间**：
- 处理时间: 30 分钟
- 切换时间: 30 秒
- 总时间: 30.5 分钟

**提升**：
- ✅ 节省 4.5 分钟
- ✅ 无需人工干预
- ✅ 效率提升 13%

---

## 🎉 总结

v1.6.0 的自动账号切换功能：

1. ✅ **自动检测** - 实时监控 rate limit
2. ✅ **自动切换** - 无需人工干预
3. ✅ **智能选择** - 避免重复使用
4. ✅ **自动重试** - 切换后继续处理
5. ✅ **高效稳定** - 大幅提高效率

**让批量处理更加轻松！**

---

**版本**: v1.6.0  
**更新日期**: 2024-12-05  
**文档类型**: 使用指南
