# v1.8.4 快速参考

## 新功能
✅ 支持通过剪贴板获取多个SRT文件  
✅ 自动点击复制按钮（`iconname="content_copy"`）  
✅ 支持列表格式的数据保存  
✅ 按顺序保存为 `step_23_output_1.srt`, `step_23_output_2.srt`, ...

## 提取策略（按优先级）

1. **剪贴板提取** ⭐ 最可靠
   - 查找所有 `button[iconname="content_copy"]`
   - 按顺序点击每个按钮
   - 使用 `navigator.clipboard.readText()` 读取剪贴板
   - 返回SRT内容列表

2. **表格提取** （备用）
   - 识别包含"时间戳"和"内容"的表格
   - 提取序号、时间戳、旁白内容
   - 构建标准SRT格式

3. **代码块** （备用）
   - 查找 `<pre>`, `<code>` 元素

4. **文本搜索** （备用）
   - 在响应文本中搜索SRT格式

## 使用方法

### 测试
```bash
bash test/test_step23_25.sh
```

### 分析
```bash
python analyze_test_results.py
python analyze_step23_html.py
```

## 日志关键词
- 🔍 "方法1：尝试通过点击复制按钮获取剪贴板内容" - 使用剪贴板
- 🔍 "找到 X 个复制按钮" - 发现复制按钮
- 📋 "点击复制按钮 X/Y" - 正在点击按钮
- ✅ "从复制按钮 X 获取到 Y 字符的SRT内容" - 剪贴板读取成功
- ✅ "总共获取了 X 个SRT文件的内容" - 全部获取成功
- 📋 "处理 X 个SRT文件（来自复制按钮）" - 开始保存
- ✅ "保存SRT文件 X: step_23_output_X.srt" - 文件保存成功

## 工作流程

```
Step 23 AI响应完成
    ↓
保存HTML调试文件
    ↓
查找复制按钮 [iconname="content_copy"]
    ↓
按顺序点击每个按钮
    ↓
读取剪贴板内容
    ↓
验证SRT格式
    ↓
保存为 step_23_output_1.srt, step_23_output_2.srt, ...
    ↓
发送 Step 24
```

## 输出文件
```
assets/Process_Folder/{video_name}/
├── step_23_output_1.srt  ← 第1个复制按钮
├── step_23_output_2.srt  ← 第2个复制按钮
└── step_23_output_3.srt  ← 第3个复制按钮（如果有）
```

## 版本
v1.8.4 - 2024-12-09
